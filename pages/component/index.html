<custom-main>
  <div class="flex flex-col gap-4 mx-4">
    <h1 class="m-0 overflow-hidden text-ellipsis whitespace-nowrap">
      <slot name="component.title"></slot>
    </h1>
    <nav use-if="component.isEditable" aria-label="Secondary Navigation"
      class="flex flex-wrap gap-x-4 gap-y-2 justify-between">
      <a :href="component.manageHref">Manage component</a>
      <a :hidden="!component.isDraft" :href="component.publishHref">
        Publish changes...
      </a>
    </nav>
  </div>
  <div class="flex flex-wrap items-start gap-4 m-4">
    <custom-details summary="Component Preview" readonly>
      <iframe :src="component.renderHref" class="border border-gray-500 border-solid box-border block min-h-80 w-full"
        style="height: 55vw; max-height: calc(100vh - 20.75rem)"></iframe>
      <a slot="call-to-action" target="_blank" :href="component.renderHref">
        Open in new tab
      </a>
    </custom-details>
    <custom-details :action="component.draftHref" :readonly="!component.isEditable" summary="Component Template">
      <custom-codearea language="html" name="template" :readonly="!component.isEditable" :value="component.template">
      </custom-codearea>
    </custom-details>
    <div class="flex flex-col flex-wrap gap-4" style="flex: 1 1 32rem">
      <custom-details :action="component.draftHref" :readonly="!component.isEditable" compact
        summary="Component Script">
        <custom-codearea compact language="ts" name="script" :readonly="!component.isEditable"
          :value="component.script">
        </custom-codearea>
      </custom-details>
      <custom-details :action="component.draftHref" :readonly="!component.isEditable" compact
        summary="Component Context">
        <custom-codearea compact language="yaml" name="context" :readonly="!component.isEditable"
          :value="component.context">
        </custom-codearea>
      </custom-details>
    </div>
  </div>
</custom-main>

<link rel="element" as="custom-codearea" href="/system/codearea.html">
<link rel="element" as="custom-details" href="/system/details.html">
<link rel="element" as="custom-main" href="/system/main.html">