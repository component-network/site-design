<head>
  <link rel="element" as="custom-button" href="/system/button.html">
  <link rel="element" as="custom-codearea" href="/system/codearea.html">
  <link rel="element" as="custom-details" href="/system/details.html">
  <link rel="element" as="custom-layout" href="/system/layout.html">

  <style>
    form._pages_component__form:has(input:checked) {
      background-color: rgb(255 255 255);
      box-sizing: border-box;
      height: 100dvh;
      left: 0;
      margin: 0;
      padding: 0.5rem;
      position: fixed;
      top: 0;
      width: 100vw;
      z-index: 1;
    }
  </style>
</head>

<custom-layout>
  <main class="mx-auto my-4 overflow-hidden">
    <div class="flex flex-col gap-4 mx-4">
      <h1 class="m-0 overflow-hidden text-ellipsis whitespace-nowrap">
        <slot name="component.title"></slot>
      </h1>
      <nav used-if="component.isEditable" aria-label="Secondary Navigation"
        class="flex flex-wrap gap-x-4 gap-y-2 justify-between">
        <a :href="component.manageHref">Manage component</a>
        <a :hidden="!component.isDraft" :href="component.publishHref">
          Publish changes...
        </a>
      </nav>
    </div>
    <div class="flex flex-wrap items-start gap-4 m-4">
      <custom-details summary="Component Preview">
        <div class="mt-4">
          <iframe :src="component.renderHref"
            class="border border-gray-500 border-solid box-border block min-h-80 w-full"
            style="height: 55vw; max-height: calc(100vh - 20.75rem);"></iframe>
        </div>
      </custom-details>
      <custom-details summary="Component Template">
        <form class="_pages_component__form flex flex-col gap-4 mb-0 mt-4" method="post" :action="component.draftHref">
          <custom-codearea language="html" name="template" :readonly="!component.isEditable"
            :value="component.template">
          </custom-codearea>
          <div class="flex items-end justify-between">
            <custom-button used-if="component.isEditable" type="submit">Save</custom-button>
            <label class="cursor-pointer flex gap-1"><input type="checkbox">Expand</label>
          </div>
        </form>
      </custom-details>
    </div>
  </main>
</custom-layout>